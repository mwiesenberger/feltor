<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Extension: Json and NetCDF utilities: dg::file::Probes&lt; NcFile, Topology &gt; Struct Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
    <!-- ... doxygen-awesome Fragment copy ... -->
    <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeFragmentCopyButton.init()
    </script>
    <!-- ... End doxygen-awesome Fragment copy ... -->
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-fragment-copy-button.js" rel="stylesheet" type="text/css"/>
<link href="menubar.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Make a nice link to github (copied from doxygen-awesome/doxygen-custom/header.html-->
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/feltor-dev/feltor" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="80" height="80" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<!-- End Make a nice link to github -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
    <!--My own title area-->
  <ul class="menubar">
      <!-- <li><a href="../../../index.html">/</a><li>-->
    <li><a href="../../dg/html/topics.html">dg</a></li>
    <li><a href="../../geometries/html/topics.html">dg::geo</a></li>
    <li><a href="../../file/html/topics.html">dg::file</a></li>
    <li><a href="../../exblas/html/namespacedg_1_1exblas.html">dg::exblas</a></li>
    <li><a href="../../matrix/html/topics.html">dg::mat</a></li>
  </ul>
  <!--End My own title area-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Extension: Json and NetCDF utilities
   </div>
   <div id="projectbrief">#include &quot;dg/file/file.h&quot;</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('structdg_1_1file_1_1_probes.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="structdg_1_1file_1_1_probes-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">dg::file::Probes&lt; NcFile, Topology &gt; Struct Template Reference<div class="ingroups"><a class="el" href="group__high.html">A high level C++ interface to NetCDF-4</a> &raquo; <a class="el" href="group__probes.html">The Probes diagnostics module</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Facilitate output at selected points.  
 <a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1cf9e26bed43603fe1bb225392b59b90" id="r_a1cf9e26bed43603fe1bb225392b59b90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1cf9e26bed43603fe1bb225392b59b90">Probes</a> ()=default</td></tr>
<tr class="separator:a1cf9e26bed43603fe1bb225392b59b90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48a0a714c835618c8bab194e0247604" id="r_ab48a0a714c835618c8bab194e0247604"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab48a0a714c835618c8bab194e0247604">Probes</a> (<a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a> &amp;file, const Topology &amp;grid, const <a class="el" href="structdg_1_1file_1_1_probes_params.html">ProbesParams</a> &amp;params)</td></tr>
<tr class="memdesc:ab48a0a714c835618c8bab194e0247604"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct from parameter struct.  <br /></td></tr>
<tr class="separator:ab48a0a714c835618c8bab194e0247604"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03f10c6551658adcb00d9e24a0fdaf6d" id="r_a03f10c6551658adcb00d9e24a0fdaf6d"><td class="memTemplParams" colspan="2">template&lt;class ListClass , class ... Params&gt; </td></tr>
<tr class="memitem:a03f10c6551658adcb00d9e24a0fdaf6d"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#a03f10c6551658adcb00d9e24a0fdaf6d">static_write</a> (const ListClass &amp;records, Params &amp;&amp;... ps)</td></tr>
<tr class="memdesc:a03f10c6551658adcb00d9e24a0fdaf6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directly write results of a list of callback functions to file.  <br /></td></tr>
<tr class="separator:a03f10c6551658adcb00d9e24a0fdaf6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb19aa32379900efa7ae5746801be617" id="r_aeb19aa32379900efa7ae5746801be617"><td class="memTemplParams" colspan="2">template&lt;class ListClass , class ... Params&gt; </td></tr>
<tr class="memitem:aeb19aa32379900efa7ae5746801be617"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#aeb19aa32379900efa7ae5746801be617">buffer</a> (double time, const ListClass &amp;probe_list, Params &amp;&amp;... ps)</td></tr>
<tr class="memdesc:aeb19aa32379900efa7ae5746801be617"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write (time-dependent) results of a list of callback functions to internal buffer.  <br /></td></tr>
<tr class="separator:aeb19aa32379900efa7ae5746801be617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62ab8a9f483e17be29e03bbf5a75e75f" id="r_a62ab8a9f483e17be29e03bbf5a75e75f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62ab8a9f483e17be29e03bbf5a75e75f">flush</a> ()</td></tr>
<tr class="memdesc:a62ab8a9f483e17be29e03bbf5a75e75f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush the buffer to file.  <br /></td></tr>
<tr class="separator:a62ab8a9f483e17be29e03bbf5a75e75f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5860349aa3322218f58c92dbd5a9ba4" id="r_ac5860349aa3322218f58c92dbd5a9ba4"><td class="memTemplParams" colspan="2">template&lt;class ListClass , class ... Params&gt; </td></tr>
<tr class="memitem:ac5860349aa3322218f58c92dbd5a9ba4"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#ac5860349aa3322218f58c92dbd5a9ba4">write</a> (double time, const ListClass &amp;probe_list, Params &amp;&amp;... ps)</td></tr>
<tr class="memdesc:ac5860349aa3322218f58c92dbd5a9ba4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <code>buffer</code> followed by <code>flush</code>.  <br /></td></tr>
<tr class="separator:ac5860349aa3322218f58c92dbd5a9ba4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a>, class Topology&gt;<br />
struct dg::file::Probes&lt; NcFile, Topology &gt;</div><p>Facilitate output at selected points. </p>
<p>This class is a high level synthetic diagnostics package. Typically, it works together with the <code><a class="el" href="group__probes.html#ga47fa71c0f05e09a4deaa3737bf66962e" title="Parse probe field in json file for use with Probes class.">dg::file::parse_probes</a></code> function</p>
<p>Instead of writing to file every time one desires probe outputs, an internal buffer stores the probe values when the <code>buffer</code> member is called. File writes happen only when calling <code>flush</code> </p><dl class="section note"><dt>Note</dt><dd>in an MPI program all processes in the <code>file.communicator()</code> have to create the class and call its methods. </dd>
<dd>
It is the topology of the simulation grid that is needed here, i.e. the Topology <b>from which</b> to interpolate, not the topology of the 1d probe array. The class automatically constructs the latter itself. </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>Because the paraview NetCDF reader is faulty, it is recommended that <code><a class="el" href="structdg_1_1file_1_1_probes.html" title="Facilitate output at selected points.">Probes</a></code> is constructed only after all other root dimensions in the file are defined. This is because of the dimension numbering in NetCDF-4. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a1cf9e26bed43603fe1bb225392b59b90" name="a1cf9e26bed43603fe1bb225392b59b90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cf9e26bed43603fe1bb225392b59b90">&#9670;&#160;</a></span>Probes() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a> , class Topology &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdg_1_1file_1_1_probes.html">dg::file::Probes</a>&lt; <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a>, Topology &gt;::Probes </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab48a0a714c835618c8bab194e0247604" name="ab48a0a714c835618c8bab194e0247604"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab48a0a714c835618c8bab194e0247604">&#9670;&#160;</a></span>Probes() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a> , class Topology &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdg_1_1file_1_1_probes.html">dg::file::Probes</a>&lt; <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a>, Topology &gt;::Probes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>file</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Topology &amp;</td>          <td class="paramname"><span class="paramname"><em>grid</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structdg_1_1file_1_1_probes_params.html">ProbesParams</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>params</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct from parameter struct. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>NetCDF file; a "probes" group will be generated in the current group that contains all fields this class writes to file (probe dimensions are called "ptime" and "pdim"). The file must be open. </td></tr>
    <tr><td class="paramname">grid</td><td>The interpolation matrix is generated with the <code>grid</code> and <code>params.coords</code> . <code>grid.ndim</code> must equal <code>param.coords.size()</code> </td></tr>
    <tr><td class="paramname">params</td><td>Typically read in from file with <code><a class="el" href="group__probes.html#ga47fa71c0f05e09a4deaa3737bf66962e" title="Parse probe field in json file for use with Probes class.">dg::file::parse_probes</a></code> </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" frameborder="0" src="structdg_1_1file_1_1_probes_ab48a0a714c835618c8bab194e0247604_cgraph.svg" width="795" height="358"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aeb19aa32379900efa7ae5746801be617" name="aeb19aa32379900efa7ae5746801be617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb19aa32379900efa7ae5746801be617">&#9670;&#160;</a></span>buffer()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a> , class Topology &gt; </div>
<div class="memtemplate">
template&lt;class ListClass , class ... Params&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structdg_1_1file_1_1_probes.html">dg::file::Probes</a>&lt; <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a>, Topology &gt;::buffer </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>time</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ListClass &amp;</td>          <td class="paramname"><span class="paramname"><em>probe_list</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Params &amp;&amp;...</td>          <td class="paramname"><span class="paramname"><em>ps</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write (time-dependent) results of a list of callback functions to internal buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>The time value to store </td></tr>
    <tr><td class="paramname">probe_list</td><td>the list of records to store (variables are defined in file on first write) </td></tr>
    <tr><td class="paramname">ps</td><td>The parameters forwarded to the <code>record.function( resultD,
ps...)</code> The function is supposed to store its result into the given device vector </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>No data is written to file and the netcdf file does not need to be open. </dd>
<dd>
If <code>param.probes</code> was <code>false</code> in the constructor this function returns immediately  </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">ListClass</td><td>A Type whose <code> ListClass::value_type </code> equals a Record class (e.g. <code><a class="el" href="structdg_1_1file_1_1_record.html" title="A realisation of the Record concept. Helper to generate NetCDF variables.">dg::file::Record</a></code>) The Signature <code> ListClass::value_type::Signature </code> must have either <code>void</code> as return type or a primitive type. The latter indicates a scalar output and must coincide with <code> Topology::ndim() == 0</code>. If the return type is void then the <b>first argument type</b> must be a Vector type constructible from <code>Topology::host_vector</code> e.g. a <code>dg::DVec</code>.    </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a62ab8a9f483e17be29e03bbf5a75e75f" name="a62ab8a9f483e17be29e03bbf5a75e75f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62ab8a9f483e17be29e03bbf5a75e75f">&#9670;&#160;</a></span>flush()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a> , class Topology &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structdg_1_1file_1_1_probes.html">dg::file::Probes</a>&lt; <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a>, Topology &gt;::flush </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flush the buffer to file. </p>
<p>Write all contents of the buffer to the netcdf file and reset the buffer.</p>
<dl class="section note"><dt>Note</dt><dd>If <code>param.probes</code> was <code>false</code> in the constructor this function returns immediately </dd></dl>
<dl class="section attention"><dt>Attention</dt><dd>the netcdf file needs to be open when calling this function </dd></dl>

</div>
</div>
<a id="a03f10c6551658adcb00d9e24a0fdaf6d" name="a03f10c6551658adcb00d9e24a0fdaf6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03f10c6551658adcb00d9e24a0fdaf6d">&#9670;&#160;</a></span>static_write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a> , class Topology &gt; </div>
<div class="memtemplate">
template&lt;class ListClass , class ... Params&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structdg_1_1file_1_1_probes.html">dg::file::Probes</a>&lt; <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a>, Topology &gt;::static_write </td>
          <td>(</td>
          <td class="paramtype">const ListClass &amp;</td>          <td class="paramname"><span class="paramname"><em>records</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Params &amp;&amp;...</td>          <td class="paramname"><span class="paramname"><em>ps</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Directly write results of a list of callback functions to file. </p>
<p>Each item in the list consists of a name, attributes and a callback function that is called with <code>result</code> as first argument and the given list of Params as additional arguments. </p><div class="fragment"><div class="line"><span class="keywordflow">for</span> ( <span class="keyword">auto</span>&amp; record : records)</div>
<div class="line">{</div>
<div class="line">    record.name;</div>
<div class="line">    record.atts;</div>
<div class="line">    record.function( result, ps...);</div>
<div class="line">}</div>
</div><!-- fragment --><p> The host vector has the size of the grid given in the constructor of the <a class="el" href="structdg_1_1file_1_1_probes.html" title="Facilitate output at selected points.">Probes</a> class. The callback function is supposed to write its result into the given host vector.</p>
<p>The result is then interpolated to the probe positions and stored in the netcdf file in the probes group under the given variable name, with the long name as attribute ("long_name") and the "dim" probes dimension. </p><dl class="section note"><dt>Note</dt><dd>The netcdf file must be open when this method is called. </dd>
<dd>
If <code>param.probes</code> was <code>false</code> in the constructor this function returns immediately  </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">ListClass</td><td>A Type whose <code> ListClass::value_type </code> equals a Record class (e.g. <code><a class="el" href="structdg_1_1file_1_1_record.html" title="A realisation of the Record concept. Helper to generate NetCDF variables.">dg::file::Record</a></code>) The Signature <code> ListClass::value_type::Signature </code> must have either <code>void</code> as return type or a primitive type. The latter indicates a scalar output and must coincide with <code> Topology::ndim() == 0</code>. If the return type is void then the <b>first argument type</b> must be a Vector type constructible from <code>Topology::host_vector</code> e.g. a <code>dg::DVec</code>.    </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac5860349aa3322218f58c92dbd5a9ba4" name="ac5860349aa3322218f58c92dbd5a9ba4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5860349aa3322218f58c92dbd5a9ba4">&#9670;&#160;</a></span>write()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a> , class Topology &gt; </div>
<div class="memtemplate">
template&lt;class ListClass , class ... Params&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="structdg_1_1file_1_1_probes.html">dg::file::Probes</a>&lt; <a class="el" href="group__ncfile.html#ga444cc20d9e86adfc0ad0503775a83a3b">NcFile</a>, Topology &gt;::write </td>
          <td>(</td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>time</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ListClass &amp;</td>          <td class="paramname"><span class="paramname"><em>probe_list</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Params &amp;&amp;...</td>          <td class="paramname"><span class="paramname"><em>ps</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Same as <code>buffer</code> followed by <code>flush</code>. </p>
<div class="fragment"><div class="line"><a class="code hl_function" href="#aeb19aa32379900efa7ae5746801be617">buffer</a>( time, probe_list, std::forward&lt;Params&gt;(ps)...);</div>
<div class="line"><a class="code hl_function" href="#a62ab8a9f483e17be29e03bbf5a75e75f">flush</a>();</div>
<div class="ttc" id="astructdg_1_1file_1_1_probes_html_a62ab8a9f483e17be29e03bbf5a75e75f"><div class="ttname"><a href="#a62ab8a9f483e17be29e03bbf5a75e75f">dg::file::Probes::flush</a></div><div class="ttdeci">void flush()</div><div class="ttdoc">Flush the buffer to file.</div><div class="ttdef"><b>Definition</b> probes.h:179</div></div>
<div class="ttc" id="astructdg_1_1file_1_1_probes_html_aeb19aa32379900efa7ae5746801be617"><div class="ttname"><a href="#aeb19aa32379900efa7ae5746801be617">dg::file::Probes::buffer</a></div><div class="ttdeci">void buffer(double time, const ListClass &amp;probe_list, Params &amp;&amp;... ps)</div><div class="ttdoc">Write (time-dependent) results of a list of callback functions to internal buffer.</div><div class="ttdef"><b>Definition</b> probes.h:154</div></div>
</div><!-- fragment --> 
</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="probes_8h_source.html">probes.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedg.html">dg</a></li><li class="navelem"><a class="el" href="namespacedg_1_1file.html">file</a></li><li class="navelem"><a class="el" href="structdg_1_1file_1_1_probes.html">Probes</a></li>
    <li class="footer">Generated on Mon Jun 23 2025 12:36:39 for Extension: Json and NetCDF utilities by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
